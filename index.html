<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aegis - Your Safety Platform</title>
    <meta name="description" content="Aegis: Your free, secure digital emergency card. Create a life-saving QR profile to protect yourself and your loved ones.">
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script>
</head>
<body>

    <div id="auth-container" class="auth-page-wrapper">
        <div class="auth-form-panel">
            <div class="auth-form-container">
                <div class="auth-header">
                    <h2>Aegis</h2>
                    <p>Your secure, digital life-saving card.</p>
                </div>
                <div class="auth-tabs">
                    <button id="login-tab-btn" class="auth-tab active">Login</button>
                    <button id="signup-tab-btn" class="auth-tab">Sign Up</button>
                </div>
                <form id="login-form" class="auth-form active">
                    <input type="email" id="login-email" placeholder="Email" required>
                    <div class="password-wrapper"><input type="password" id="login-password" placeholder="Password" required><span class="toggle-password">üëÅÔ∏è</span></div>
                    <button type="submit">Login</button>
                </form>
                <form id="signup-form" class="auth-form">
                    <input type="email" id="signup-email" placeholder="Email" required>
                    <div class="password-wrapper"><input type="password" id="signup-password" placeholder="Password (min. 6 characters)" required><span class="toggle-password">üëÅÔ∏è</span></div>
                    <button type="submit">Create Account</button>
                </form>
                <p id="auth-message" class="info-message"></p>
                <p id="auth-error" class="error-message"></p>
            </div>
        </div>
    </div>

    <div id="app-container" style="display: none;">
        <header class="app-header">
            <h1>Aegis</h1>
            <div>
                <span id="user-email-display"></span>
                <button id="sos-btn" class="sos-button">SOS</button>
                <button id="logout-btn">Logout</button>
            </div>
        </header>
        <main>
            <section id="qr-section" class="content-section active">
                <h2>Your Digital Emergency Card</h2>
                <span id="save-status" class="save-status-message"></span> 
                <p class="section-description">Your data is securely saved to your profile. Set the QR as your lock screen wallpaper.</p>
                <div class="qr-container">
                    <form id="qrForm" class="data-form">
                        <label for="fullName">Full Name</label><input type="text" id="fullName" placeholder="Your Full Name" required>
                        <label for="dateOfBirth">Date of Birth</label><input type="date" id="dateOfBirth">
                        <label for="bloodType">Blood Type</label><select id="bloodType"><option value="">Select</option><option value="O+">O+</option><option value="O-">O-</option><option value="A+">A+</option><option value="A-">A-</option><option value="B+">B+</option><option value="B-">B-</option><option value="AB+">AB+</option><option value="AB-">AB-</option></select>
                        <label for="organDonor">Organ Donor</label><select id="organDonor"><option value="">Select</option><option value="Yes">Yes</option><option value="No">No</option></select>
                        <label for="medications">Current Medications</label><textarea id="medications" placeholder="e.g., Insulin..."></textarea>
                        <label for="allergies">Allergies</label><textarea id="allergies" placeholder="e.g., Penicillin..."></textarea>
                        <label for="medicalConditions">Current Medical Conditions</label><textarea id="medicalConditions" placeholder="e.g., Diabetes..."></textarea>
                        <label for="primaryContactName">Primary Emergency Contact</label><input type="text" id="primaryContactName" placeholder="Name" required><input type="tel" id="primaryContactPhone" placeholder="Phone Number (e.g., 919876543210)" required>
                        <label for="secondaryContactName">Secondary Contact</label><input type="text" id="secondaryContactName" placeholder="Name"><input type="tel" id="secondaryContactPhone" placeholder="Phone Number">
                        <label for="physicianName">Primary Physician</label><input type="text" id="physicianName" placeholder="Doctor's Name"><input type="tel" id="physicianPhone" placeholder="Clinic Phone Number">
                    </form>
                    <div class="qr-output">
                        <div id="qrcode"></div>
                        <button id="downloadQR">Download QR Code</button>
                    </div>
                </div>
            </section>
        </main>
        <footer>
            <div class="footer-links">
                <a href="#" id="about-link">About</a><a href="#" id="terms-link">Terms</a><a href="#" id="privacy-link">Privacy</a><a href="#" id="how-it-works-link">How it Works</a><a href="#" id="disclaimer-link">Disclaimer</a>
            </div>
            <p>¬© 2025 Aegis. Stay Safe.</p>
        </footer>
    </div>

    <div id="about-modal" class="modal-overlay">...</div>
    <div id="terms-modal" class="modal-overlay">...</div>
    <div id="privacy-modal" class="modal-overlay">...</div>
    <div id="disclaimer-modal" class="modal-overlay">...</div>
    <div id="how-it-works-modal" class="modal-overlay">
        <div class="modal-content">
            <button class="modal-close-btn">&times;</button>
            <h2>How Aegis Works</h2>
            <p>Aegis is your personal safety toolkit, with two main features:</p>
            <h4>üõ°Ô∏è Your Digital Emergency Card</h4>
            <p>Fill out your profile with your critical medical information. We generate a unique QR code for you. In an emergency, first responders can scan this code to get the information they need, even if you can't communicate.</p>
            <h4>üÜò The One-Tap SOS Button</h4>
            <p>If you're in an unsafe situation, press the SOS button in the header. The app will get your current GPS location and help you instantly share it with your primary emergency contact via WhatsApp, or with anyone else through other apps.</p>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="config.js"></script>
    <script src="script.js"></script>
</body>
</html>
