<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aegis - Your Safety Platform</title>
    <meta name="description" content="Aegis: Your free, secure digital emergency card. Create a life-saving QR profile to protect yourself and your loved ones.">
    <meta property="og:title" content="Aegis - Your Safety Platform">
    <meta property="og:description" content="Create a free, secure digital emergency card.">
    <meta property="og:type" content="website">
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script>
</head>
<body>

    <div id="auth-container" class="auth-page-wrapper">
        <div class="auth-form-panel">
            <div class="auth-form-container">
                <div class="auth-header">
                    <h2>Aegis</h2>
                    <p>Your secure, digital life-saving card.</p>
                </div>
                <div class="auth-tabs">
                    <button id="login-tab-btn" class="auth-tab active">Login</button>
                    <button id="signup-tab-btn" class="auth-tab">Sign Up</button>
                </div>
                <form id="login-form" class="auth-form active">
                    <input type="email" id="login-email" placeholder="Email" required>
                    <input type="password" id="login-password" placeholder="Password" required>
                    <button type="submit">Login</button>
                </form>
                <form id="signup-form" class="auth-form">
                    <input type="email" id="signup-email" placeholder="Email" required>
                    <input type="password" id="signup-password" placeholder="Password (min. 6 characters)" required>
                    <button type="submit">Create Account</button>
                </form>
                <p id="auth-message" class="info-message"></p>
                <p id="auth-error" class="error-message"></p>
            </div>
        </div>
    </div>

    <div id="app-container" style="display: none;">
        <header class="app-header">
            <h1>Aegis</h1>
            <div>
                <span id="user-email-display"></span>
                <button id="logout-btn">Logout</button>
            </div>
        </header>
        <main>
            <section id="qr-section" class="content-section active">
                <h2>Your Digital Emergency Card</h2>
                <span id="save-status" class="save-status-message"></span> 
                <p class="section-description">Your data is securely saved to your profile. Set the QR as your lock screen wallpaper.</p>
                <div class="qr-container">
                    <form id="qrForm" class="data-form">
                        <label for="fullName">Full Name</label>
                        <input type="text" id="fullName" placeholder="Your Full Name" required>
                        <label for="dateOfBirth">Date of Birth</label>
                        <input type="date" id="dateOfBirth">
                        <label for="bloodType">Blood Type</label>
                        <select id="bloodType">
                            <option value="">Select Blood Type</option>
                            <option value="O+">O+</option>
                            <option value="O-">O-</option>
                            <option value="A+">A+</option>
                            <option value="A-">A-</option>
                            <option value="B+">B+</option>
                            <option value="B-">B-</option>
                            <option value="AB+">AB+</option>
                            <option value="AB-">AB-</option>
                        </select>
                        <label for="organDonor">Organ Donor</label>
                        <select id="organDonor">
                            <option value="">Select Status</option>
                            <option value="Yes">Yes</option>
                            <option value="No">No</option>
                        </select>
                        <label for="medications">Current Medications</label>
                        <textarea id="medications" placeholder="e.g., Insulin, Warfarin..."></textarea>
                        <label for="allergies">Allergies</label>
                        <textarea id="allergies" placeholder="e.g., Penicillin, Peanuts..."></textarea>
                        <label for="medicalConditions">Current Medical Conditions</label>
                        <textarea id="medicalConditions" placeholder="e.g., Diabetes, Epilepsy..."></textarea>
                        <label for="primaryContactName">Primary Emergency Contact</label>
                        <input type="text" id="primaryContactName" placeholder="Name" required>
                        <input type="tel" id="primaryContactPhone" placeholder="Phone Number" required>
                        <label for="secondaryContactName">Secondary Contact (Optional)</label>
                        <input type="text" id="secondaryContactName" placeholder="Name">
                        <input type="tel" id="secondaryContactPhone" placeholder="Phone Number">
                        <label for="physicianName">Primary Physician (Optional)</label>
                        <input type="text" id="physicianName" placeholder="Doctor's Name">
                        <input type="tel" id="physicianPhone" placeholder="Clinic Phone Number">
                    </form>
                    <div class="qr-output">
                        <div id="qrcode"></div>
                        <button id="downloadQR">Download QR Code</button>
                    </div>
                </div>
            </section>
        </main>
        <footer>
            <div class="footer-links">
                <a href="#" id="about-link">About Us</a>
                <a href="#" id="terms-link">Terms & Conditions</a>
                <a href="#" id="privacy-link">Privacy Policy</a>
                <a href="#" id="disclaimer-link">Disclaimer</a>
            </div>
            <p>Â© 2025 Aegis. Stay Safe.</p>
        </footer>
    </div>

    <div id="about-modal" class="modal-overlay">
        <div class="modal-content">
            <button class="modal-close-btn">&times;</button>
            <h2>About Aegis</h2>
            <p>Aegis was created with a single, vital mission: to provide a simple, secure, and accessible way for anyone to carry their life-saving information at all times. In an emergency, every second counts. Our platform ensures that first responders and medical professionals can get the critical details they need, instantly. We believe in empowering individuals to take control of their personal safety, and Aegis is the first step in that journey.</p>
        </div>
    </div>

    <div id="terms-modal" class="modal-overlay">
        <div class="modal-content">
            <button class="modal-close-btn">&times;</button>
            <h2>Terms and Conditions</h2>
            <p>Welcome to Aegis. These terms and conditions outline the rules and regulations for the use of our web application. By accessing and using Aegis, you accept these terms and conditions in full. Do not continue to use Aegis if you do not accept all of the terms and conditions stated on this page.</p>
            <p><b>1. Description of Service:</b> Aegis is a free web application that allows users to create a secure account to store their personal emergency information. This information is used to generate a QR code that links to a public, unlisted web page displaying the user-provided information for access in an emergency.</p>
            <p><b>2. User Responsibilities:</b> You, the user, are solely and entirely responsible for the accuracy, completeness, and timeliness of the information you provide in your Aegis profile. Inaccurate or outdated information can lead to severe consequences in an emergency.</p>
            <p><b>3. Governing Law:</b> These Terms shall be governed and construed in accordance with the laws of Gujarat, India. You agree to submit to the personal jurisdiction of the courts located in this jurisdiction.</p>
        </div>
    </div>

    <div id="privacy-modal" class="modal-overlay">
        <div class="modal-content">
            <button class="modal-close-btn">&times;</button>
            <h2>Privacy Policy</h2>
            <p>Your privacy is important to us. This Privacy Policy explains how we collect, use, store, and disclose your information when you use Aegis.</p>
            <p><b>1. Information We Collect:</b> We collect your email address for account creation and the health and personal information you voluntarily provide for your emergency profile (e.g., name, blood type, allergies, etc.).</p>
            <p><b>2. How We Use Your Information:</b> Your data is used to create and maintain your account and to generate your unique QR code. The emergency data is made public only through the unique QR code link that you control and choose to share.</p>
            <p><b>3. Data Sharing and Disclosure:</b> We do not sell, trade, or otherwise transfer your personally identifiable information to outside parties for marketing or advertising purposes.</p>
            <p><b>4. Data Security:</b> We take reasonable measures to protect your information, including using the secure infrastructure provided by our backend service, Supabase. However, no method of transmission over the Internet is 100% secure, and we cannot guarantee its absolute security.</p>
        </div>
    </div>

    <div id="disclaimer-modal" class="modal-overlay">
        <div class="modal-content">
            <button class="modal-close-btn">&times;</button>
            <h2>Disclaimer of Liability</h2>
            <p><b>1. Not Medical Advice:</b> Aegis is a personal information management tool. It is not a medical device, does not provide medical advice, and is not a substitute for professional medical consultation or local emergency services.</p>
            <p><b>2. No Guarantee of Service:</b> The service is provided as-is. We do not guarantee that the service will be available or error-free at all times. In an emergency, the service may be unavailable due to network outages or other unforeseen circumstances.</p>
            <p><b>3. User Assumes Full Responsibility:</b> You, the user, assume full responsibility for your personal safety and the accuracy of the information you provide. The developers of Aegis shall not be held liable for any damages, injury, or loss of life resulting from the use or inability to use this application.</p>
            <p><b>4. Emergency Services:</b> In the event of a medical emergency, you should immediately contact your local emergency number. Aegis is not a monitoring service and will not contact emergency services on your behalf.</p>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="config.js"></script>
    <script src="script.js"></script>
</body>
</html>
